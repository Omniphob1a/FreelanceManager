<!-- START: improved project-detail with team management -->
<div class="project-detail bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col w-full max-w-4xl max-h-[90vh]">
    <!-- Header (flat, accent strip, avatars, next milestone, progress) -->
    <div class="bg-white text-gray-900 p-6 flex flex-col gap-4 border-b border-gray-100">
        <div class="flex items-start justify-between gap-4">
            <div class="flex items-start gap-4 w-full">
                <!-- Accent strip -->
                <div aria-hidden="true" class="w-1.5 h-10 rounded-full bg-blue-600 mt-1"></div>

                <div class="flex-1 min-w-0">
                    <div class="flex items-center justify-between gap-4">
                        <div class="min-w-0">
                            <h2 id="projectTitle" class="text-2xl font-bold truncate">Loading...</h2>
                            <div class="flex items-center gap-3 mt-2 text-sm text-gray-500">
                                <span class="inline-flex items-center bg-blue-50 text-blue-700 px-2 py-1 rounded-md">
                                    <i class="fas fa-hashtag mr-1"></i>
                                    <span id="projectIdText">...</span>
                                </span>

                                <!-- Status (keeps original id) -->
                                <span id="projectStatus" class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700 border border-gray-200">
                                    Loading...
                                </span>

                                <!-- Next milestone placeholder -->
                                <span id="projectNextMilestone" class="text-xs text-gray-500 hidden">
                                    <!-- JS can fill: e.g. "Next: Design review · Aug 25" -->
                                </span>
                            </div>
                        </div>

                        <!-- Right-side actions: keep close button and don't change id/class -->
                        <div class="flex items-center gap-2">
                            <button class="close-btn text-gray-600 p-2 rounded-full hover:bg-gray-100 transition" aria-label="Close">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>

                    <!-- small meta row: avatars + activity (optional) -->
                    <div class="flex items-center gap-3 mt-3">
                        <div id="projectAvatars" class="flex -space-x-2 items-center" aria-hidden="true">
                            <!-- JS may inject avatar <img> elements here -->
                        </div>
                        <div id="projectMetaSummary" class="text-xs text-gray-500">
                            <!-- optional JS fill: "5 members · updated 2d ago" -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress row (keeps unobtrusive, JS-updatable) -->
        <div class="flex flex-col gap-2">
            <div class="flex items-center justify-between gap-4">
                <div class="text-xs text-gray-600" aria-hidden="true">Progress</div>
                <div class="text-xs text-gray-500" id="projectProgressText" aria-live="polite">Loading...</div>
            </div>

            <div class="w-full bg-gray-100 h-2 rounded-full overflow-hidden" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-labelledby="projectTitle">
                <div id="projectProgressBar" class="h-2 rounded-full" style="width:0%; background-color: #2563EB;"></div>
            </div>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs flex border-b border-gray-200 bg-gray-50 px-4">
        <button class="tab-btn active px-6 py-4 font-medium text-gray-900 border-b-2 border-blue-600 text-sm flex items-center" aria-selected="true">
            <i class="fas fa-info-circle mr-2"></i> Overview
        </button>
        <button class="tab-btn px-6 py-4 font-medium text-gray-500 hover:text-gray-700 text-sm flex items-center" data-tab="milestones" aria-selected="false">
            <i class="fas fa-flag-checkered mr-2"></i> Milestones
        </button>
        <button class="tab-btn px-6 py-4 font-medium text-gray-500 hover:text-gray-700 text-sm flex items-center" data-tab="team" aria-selected="false">
            <i class="fas fa-users mr-2"></i> Team
        </button>
        <button class="tab-btn px-6 py-4 font-medium text-gray-500 hover:text-gray-700 text-sm flex items-center" data-tab="attachments" aria-selected="false">
            <i class="fas fa-paperclip mr-2"></i> Attachments
        </button>
    </div>

    <!-- Content -->
    <div class="flex-grow overflow-y-auto">
        <!-- Overview Tab -->
        <div id="overviewTab" class="tab-content active p-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Main Content -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Description Card -->
                    <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="text-lg font-semibold text-gray-800">Description</h3>
                            <button id="editDescriptionBtn" class="text-blue-600 hover:text-blue-800" aria-label="Edit description">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                        <p id="projectDescription" class="text-gray-600 mt-2">Loading description...</p>
                        <div id="descriptionEditor" class="hidden mt-3">
                            <textarea class="w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="Project description"></textarea>
                            <div class="flex justify-end space-x-2 mt-2">
                                <button id="cancelEditDesc" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Cancel</button>
                                <button id="saveDescriptionBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Save</button>
                            </div>
                        </div>
                    </div>

                    <!-- Details Card -->
                    <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Details</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <p class="text-xs text-gray-500 mb-1">Status</p>
                                <div class="flex items-center">
                                    <span id="projectStatusBadge" class="px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700">
                                        Loading...
                                    </span>
                                </div>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <p class="text-xs text-gray-500 mb-1">Category</p>
                                 <p id="projectCategory" class="font-medium text-gray-800 mt-1">-</p>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <p class="text-xs text-gray-500 mb-1">Budget</p>
                                <p id="projectBudget" class="font-medium text-gray-800 mt-1">-</p>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <p class="text-xs text-gray-500 mb-1">Created</p>
                                <p id="projectCreated" class="font-medium text-gray-800 mt-1">-</p>
                            </div>

                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <p class="text-xs text-gray-500 mb-1">Expires</p>
                                <p id="projectExpires" class="font-medium text-gray-800 mt-1">-</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="space-y-6">
                    <!-- Actions Card -->
                    <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Actions</h3>
                        <div class="space-y-3">
                            <button id="publishProjectBtn" class="w-full flex items-center justify-center px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-medium transition shadow-md">
                                <i class="fas fa-paper-plane mr-2"></i> Publish Project
                            </button>
                            <button id="completeProjectBtn" class="w-full flex items-center justify-center px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl text-sm font-medium transition shadow-md">
                                <i class="fas fa-check-circle mr-2"></i> Mark as Completed
                            </button>
                            <div class="grid grid-cols-2 gap-3 pt-1">
                                <button id="editProjectBtn" class="flex items-center justify-center px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl text-sm font-medium transition">
                                    <i class="fas fa-edit mr-2"></i> Edit
                                </button>
                                <button id="archiveProjectBtn" class="flex items-center justify-center px-4 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-xl text-sm font-medium transition">
                                    <i class="fas fa-archive mr-2"></i> Archive
                                </button>
                            </div>
                            <button id="deleteProjectBtn" class="w-full flex items-center justify-center px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl text-sm font-medium transition shadow-md mt-2">
                                <i class="fas fa-trash-alt mr-2"></i> Delete Project
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-4 italic" id="statusHint">
                            <i class="fas fa-info-circle mr-1"></i> Loading project status...
                        </p>
                    </div>

                    <!-- Tags Card -->
                    <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Tags</h3>
                            <span class="text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full">
                                <span id="tagsCount">0</span> tags
                            </span>
                        </div>
                        <div id="projectTags" class="flex flex-wrap gap-2 mb-4">
                            <div class="text-sm text-gray-500">No tags added</div>
                        </div>
                        <div class="flex">
                            <input type="text" id="newTagInput" placeholder="Add new tag"
                                class="flex-grow px-4 py-2.5 text-sm border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="addTagBtn" class="px-4 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 transition text-sm font-medium">
                                Add
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Milestones Tab -->
        <div id="milestonesTab" class="tab-content hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold text-gray-800">Milestones</h3>
                <button id="addMilestoneBtn"
                        class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center text-sm font-medium shadow-md">
                    <i class="fas fa-plus mr-2"></i> Add Milestone
                </button>
            </div>

            <!-- Milestone Form -->
            <div id="milestoneFormContainer" class="hidden bg-white rounded-xl p-5 mb-6 border border-gray-200">
                <h4 class="font-semibold text-gray-800 mb-4 text-base">New Milestone</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Title*</label>
                        <input type="text" id="milestoneTitleInput"
                               class="w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                               placeholder="Milestone name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Due Date*</label>
                        <input type="text" id="milestoneDueDateInput"
                               class="w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 date-input">
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-5">
                    <button id="cancelMilestoneBtn" class="px-4 py-2.5 text-gray-600 hover:bg-gray-100 rounded-lg font-medium">Cancel</button>
                    <button id="saveMilestoneBtn" class="px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition shadow-md">
                        <i class="fas fa-save mr-2"></i> Save Milestone
                    </button>
                </div>
            </div>

            <!-- Milestones List -->
            <div class="space-y-4" id="milestonesContainer">
                <div class="text-center py-4 text-gray-500">Loading milestones...</div>
            </div>
        </div>

        <!-- Team Tab -->
        <div id="teamTab" class="tab-content hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold text-gray-800">Team Members</h3>
                <button id="addTeamMemberBtn"
                        class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center text-sm font-medium shadow-md">
                    <i class="fas fa-plus mr-2"></i> Add Member
                </button>
            </div>

            <!-- Add Member Form -->
            <div id="addMemberForm" class="hidden bg-white rounded-xl p-5 mb-6 border border-gray-200">
                <h4 class="font-semibold text-gray-800 mb-4 text-base">Add Team Member</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Login*</label>
                        <input type="text" id="memberLoginInput"
                               class="w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                               placeholder="User login">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                        <select id="memberRoleInput" class="w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="member">Member</option>
                            <option value="admin">Admin</option>
                            <option value="viewer">Viewer</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-5">
                    <button id="cancelAddMemberBtn" class="px-4 py-2.5 text-gray-600 hover:bg-gray-100 rounded-lg font-medium">Cancel</button>
                    <button id="saveMemberBtn" class="px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition shadow-md">
                        <i class="fas fa-save mr-2"></i> Add Member
                    </button>
                </div>
            </div>

            <!-- Team Members List -->
            <div class="space-y-4" id="teamMembersContainer">
                <div class="text-center py-4 text-gray-500">Loading team members...</div>
            </div>
        </div>

        <!-- Attachments Tab -->
        <div id="attachmentsTab" class="tab-content hidden p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold text-gray-800">Attachments</h3>
                <div>
                    <input type="file" id="attachmentFile" class="hidden" multiple>
                    <button id="addAttachmentBtn"
                            class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium shadow-md">
                        <i class="fas fa-plus mr-2"></i> Add Attachment
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="attachmentsContainer">
                <div class="text-center py-4 text-gray-500 col-span-full">Loading attachments...</div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-white border-t border-gray-100 px-6 py-4 flex justify-end">
        <button class="close-modal-btn px-5 py-2.5 text-gray-700 hover:bg-gray-100 rounded-lg font-medium text-sm">
            <i class="fas fa-times mr-2"></i> Close
        </button>
    </div>
</div>
<!-- END: improved project-detail with team management -->