<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Projects</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body class="bg-gray-50 text-gray-900">
  <div class="container mx-auto px-4 py-8">
    <!-- Header and create button -->
    <div class="flex justify-between items-center mb-8">
      <div>
        <h1 class="text-3xl font-bold text-gray-900">My Projects</h1>
        <p class="text-gray-600 mt-1">Manage and track all your projects in one place</p>
      </div>
      <button id="newProjectBtn" class="filters-btn" type="button">
        <i class="fas fa-plus mr-2"></i> New Project
      </button>
    </div>

    <!-- Filters toggle button -->
    <div class="flex justify-between items-center mb-6">
      <div class="relative">
        <button id="toggleFiltersBtn" class="filters-btn relative" type="button" aria-expanded="false" aria-controls="filtersPanel">
          <i class="fas fa-filter mr-2"></i> Filters
          <span id="filterCounter" class="filter-counter hidden">0</span>
        </button>
      </div>
    </div>

    <!-- ФИЛЬТРЫ: панель -->
    <div id="filtersPanel" class="bg-white rounded-lg">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 p-6">
        <!-- Status filter (radio buttons for single selection) -->
        <div class="filter-card">
          <label class="block text-sm font-medium text-gray-700 mb-3">Status</label>
          <div class="space-y-2">
            <label class="flex items-center cursor-pointer">
              <input type="radio" name="filterStatus" class="filter-status mr-3" value="0" />
              <span class="text-sm">Draft</span>
            </label>
            <label class="flex items-center cursor-pointer">
              <input type="radio" name="filterStatus" class="filter-status mr-3" value="1" />
              <span class="text-sm">Active</span>
            </label>
            <label class="flex items-center cursor-pointer">
              <input type="radio" name="filterStatus" class="filter-status mr-3" value="2" />
              <span class="text-sm">Completed</span>
            </label>
            <label class="flex items-center cursor-pointer">
              <input type="radio" name="filterStatus" class="filter-status mr-3" value="3" />
              <span class="text-sm">Archived</span>
            </label>
          </div>
        </div>

        <!-- Date range filter -->
        <div class="filter-card">
          <label class="block text-sm font-medium text-gray-700 mb-2">Created From</label>
          <input type="date" id="filterCreatedFrom" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm mb-3" />

          <label class="block text-sm font-medium text-gray-700 mb-2">Created To</label>
          <input type="date" id="filterCreatedTo" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" />
        </div>

        <!-- Category filter -->
        <div class="filter-card">
          <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
          <select id="filterCategory" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
            <option value="">All categories</option>
            <option value="design">Design</option>
            <option value="development">Development</option>
            <option value="frontend">Frontend</option>
            <option value="backend">Backend</option>
            <option value="fullstack">Fullstack</option>
            <option value="mobile">Mobile</option>
            <option value="devops">DevOps</option>
            <option value="qa">QA</option>
            <option value="testing">Testing</option>
            <option value="research">Research</option>
            <option value="analytics">Analytics</option>
            <option value="data-science">Data Science</option>
            <option value="machine-learning">Machine Learning</option>
            <option value="ai">AI</option>
            <option value="security">Security</option>
            <option value="sysadmin">SysAdmin</option>
            <option value="game-dev">Game Dev</option>
            <option value="project-management">Project Management</option>
            <option value="product-management">Product Management</option>
            <option value="marketing">Marketing</option>
            <option value="smm">SMM</option>
            <option value="seo">SEO</option>
            <option value="content">Content</option>
            <option value="copywriting">Copywriting</option>
            <option value="sales">Sales</option>
            <option value="support">Support</option>
            <option value="legal">Legal</option>
            <option value="finance">Finance</option>
            <option value="hr">HR</option>
            <option value="training">Training</option>
            <option value="operations">Operations</option>
            <option value="strategy">Strategy</option>
            <option value="architecture">Architecture</option>
            <option value="consulting">Consulting</option>
            <option value="innovation">Innovation</option>
            <option value="compliance">Compliance</option>
          </select>
        </div>

        <!-- Budget filter -->
        <div class="filter-card">
          <label class="block text-sm font-medium text-gray-700 mb-2">Budget Range</label>
          <div class="flex items-center space-x-2 mb-3">
            <div class="relative flex-1">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">$</span>
              <input type="number" id="filterMinBudget" class="w-full border border-gray-300 rounded-md pl-8 px-3 py-2 text-sm" placeholder="Min" min="0" />
            </div>
            <span class="text-gray-400">-</span>
            <div class="relative flex-1">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">$</span>
              <input type="number" id="filterMaxBudget" class="w-full border border-gray-300 rounded-md pl-8 px-3 py-2 text-sm" placeholder="Max" />
            </div>
          </div>
        </div>
      </div>

      <!-- Filter action buttons -->
      <div class="mt-6 flex justify-end space-x-3 p-4 border-t border-gray-100">
        <button id="applyFiltersBtn" class="filters-btn" type="button">
          <i class="fas fa-check-circle mr-2"></i> Apply Filters
        </button>
        <button id="clearFiltersBtn" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-all" type="button">
          <i class="fas fa-times mr-2"></i> Clear
        </button>
      </div>
    </div>

    <!-- Projects info and view toggle -->
    <div class="flex justify-between items-center mb-6 mt-6">
      <div class="text-sm text-gray-600">
        <span id="projectsCount">Loading projects...</span>
      </div>
      <div class="flex items-center space-x-4">
        <!-- Items per page selector -->
        <div class="flex items-center space-x-2">
          <span class="text-sm text-gray-500">Show:</span>
          <select id="itemsPerPageSelect" class="px-2 py-1 border border-gray-300 rounded text-sm">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="25">25</option>
            <option value="50">50</option>
          </select>
        </div>

        <!-- View toggle -->
        <div class="flex items-center space-x-2">
          <span class="text-sm text-gray-500">View:</span>
          <button id="gridViewBtn" class="p-2 text-gray-700 border border-gray-300 rounded-md bg-gray-100 active" type="button">
            <i class="fas fa-th-large"></i>
          </button>
          <button id="listViewBtn" class="p-2 text-gray-500 border border-gray-300 rounded-md hover:bg-gray-100" type="button">
            <i class="fas fa-list"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Projects grid -->
    <div id="projectsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <!-- Projects will be loaded here -->
    </div>

    <!-- Projects table -->
    <div id="projectsTable" class="hidden overflow-x-auto mb-8">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Project</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Due Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Budget</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody id="projectsTableBody" class="bg-white divide-y divide-gray-200">
          <!-- Projects will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- Loading indicator -->
    <div id="projectsLoader" class="p-8 text-center">
      <div class="inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md text-gray-500 bg-gray-100">
        <i class="fas fa-spinner fa-spin mr-2"></i> Loading projects...
      </div>
    </div>

    <!-- No projects message -->
    <div id="noProjectsRow" class="hidden bg-white rounded-lg shadow p-8 text-center">
      <div class="mx-auto w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6">
        <i class="fas fa-folder-open text-blue-500 text-3xl"></i>
      </div>
      <h3 class="text-xl font-semibold text-gray-800 mb-2">No projects found</h3>
      <p class="text-gray-600 mb-6">Get started by creating your first project</p>
      <button id="createFirstProjectBtn" class="filters-btn" type="button">
        <i class="fas fa-plus mr-2"></i> Create Project
      </button>
    </div>

    <!-- Pagination -->
    <div id="paginationContainer" class="mt-8 flex justify-center"></div>
  </div>

  <!-- Hidden file input for attachments -->
  <input type="file" id="attachmentFile" style="display: none;" multiple />

  <script type="module">
    import { initProjectsPage } from '../js/modules/projects.js';

    document.addEventListener('DOMContentLoaded', () => {
      console.log('Projects page DOM loaded');
      initProjectsPage();
    });
  </script>
</body>
</html>
